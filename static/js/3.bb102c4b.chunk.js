(this.webpackJsonpmusicblocks=this.webpackJsonpmusicblocks||[]).push([[3,4,9,10,12,26,27,31,32,33,34],{14:function(n,t,e){"use strict";e.r(t),e.d(t,"setup",(function(){return g})),e.d(t,"setCode",(function(){return w})),e.d(t,"setStatus",(function(){return E})),e.d(t,"setHelp",(function(){return x})),e.d(t,"resetStates",(function(){return I}));var r,c,o,a,i,u,s,f,l=e(19),b=e(1),d=e(3),p=e.n(d),m=e(38),j=e(39),v=e(21),O=(e(40),e(0));function h(){var n=Object(b.useRef)(null),t=Object(b.useRef)(null),e=Object(b.useRef)(null),d=Object(b.useRef)(null),p=Object(b.useRef)(null),h=Object(b.useRef)(null),g=Object(b.useState)(!1),w=Object(l.a)(g,2),E=w[0],x=w[1];return Object(b.useEffect)((function(){c=n.current,o=t.current,a=e.current,i=d.current,u=p.current,s=h.current,f(),r.addEventListener("resetstates",(function(){x(!1)})),[[m.default,o],[j.default,i],[v.default,u]].forEach((function(n){var t=Object(l.a)(n,2),e=t[0],r=t[1];fetch(e).then((function(n){return n.text()})).then((function(n){return r.innerHTML=n}))}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"editor-wrapper ".concat(E?"editor-wrapper-hidden":""),children:[Object(O.jsx)("textarea",{id:"editor-codebox",ref:n,onInput:function(){return a.innerHTML=""}}),Object(O.jsxs)("div",{id:"editor-console",children:[Object(O.jsx)("button",{id:"editor-btn-help",ref:t,onClick:function(){return x(!0)}}),Object(O.jsx)("div",{id:"editor-status-wrapper",children:Object(O.jsx)("p",{id:"editor-status",ref:e})}),Object(O.jsx)("button",{id:"editor-btn-build",ref:d,onClick:function(){return r.dispatchEvent(new CustomEvent("buildprogram",{detail:c.value}))}})]})]}),Object(O.jsxs)("div",{className:"editor-wrapper ".concat(E?"":"editor-wrapper-hidden"),children:[Object(O.jsx)("textarea",{id:"editor-help",ref:h,readOnly:!0}),Object(O.jsx)("button",{id:"editor-help-close",ref:p,onClick:function(){return x(!1)}})]})]})}function g(n){return new Promise((function(t){(r=n).id="editor",p.a.render(Object(O.jsx)(h,{}),n),f=function(){return requestAnimationFrame((function(){return t()}))}}))}function w(n){c.value=n}function E(n){a.innerHTML=n}function x(n){s.innerHTML=n}function I(){r.dispatchEvent(new Event("resetstates"))}},21:function(n,t,e){"use strict";e.r(t),t.default=e.p+"static/media/close.b6f9ced0.svg"},24:function(n,t,e){"use strict";e.r(t),e.d(t,"generateAPI",(function(){return f})),e.d(t,"buildProgram",(function(){return l})),e.d(t,"resetProgram",(function(){return b}));var r,c=e(22),o=e(19),a=e(76),i=e(52),u=e(32),s=e(27);function f(){r=Object.fromEntries(Object.entries(Object(i.getSpecificationSnapshot)()).map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return[e,Object(c.a)(Object(c.a)({},r),{},{args:null})]}))),Object.entries(r).forEach((function(n){var t=Object(o.a)(n,2),e=t[0],c=(t[1],Object(u.addInstance)(e)),a=Object(u.getInstance)(c).instance;r[e].args=0===a.argLabels.length?null:a.argLabels.map((function(n){return[n,a.getArgType(n)]})),Object(u.removeInstance)(c)}));var n={};Object.entries(r).forEach((function(t){var e=Object(o.a)(t,2),r=e[0],c=e[1],a=c.category;a in n||(n[a]=[]),n[a].push([r,c.type,c.args])}));var t=[];return Object.entries(n).forEach((function(n){var e=Object(o.a)(n,2),r=e[0],c=e[1];t.push('# "'.concat(r,'" elements\n# ------------------------')),c.forEach((function(n){var e=Object(o.a)(n,3),r=e[0],c=e[1],a=e[2];"Data"===c?t.push("- [instruction]:\n    [param]:\n      ".concat(r,": string")):"Expression"===c?null===a||(1===a.length?t.push("- [instruction]:\n    ".concat(r,":\n").concat(a.map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return"      ".concat(e,": ").concat(r.join("|"))})).join("\n"))):t.push("- [instruction]:\n    [param]:\n      ".concat(r,":\n").concat(a.map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return"        ".concat(e,": ").concat(r.join("|"))})).join("\n")))):"Statement"===c?null===a?t.push("- ".concat(r)):1===a.length?t.push("- ".concat(r,": ").concat(a[0][1].join("|"))):t.push("- ".concat(r,":\n").concat(a.map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return"    ".concat(e,": ").concat(r.join("|"))})).join("\n"))):"Block"===c&&(null===a?t.push("- ".concat(r,":\n    scope:\n      - [instruction]\n      - ...")):t.push("- ".concat(r,":\n").concat(a.map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return"    ".concat(e,": ").concat(r.join("|"))})).join("\n"),"\n    scope:\n      - [instruction]\n      - ...")))})),t.push("\n")})),t.join("\n")}function l(n){var t;function e(){function n(n){var t=r[n].args;if(null===t)throw new s.InvalidArgumentError('"'.concat(n,'" does not take arguments'));if(1!==t.length)throw new s.InvalidArgumentError('"'.concat(n,'" takes ').concat(t.length," arguments but only 1 argument supplied"));return t[0][0]}function e(n,t){var e=r[n].args;if(null===e)throw new s.InvalidArgumentError('"'.concat(n,'" does not take arguments'));var c="Block"===r[n].type,a=e.map((function(n){var t=Object(o.a)(n,2),e=t[0];t[1];return e})),i=Object.keys(t);if(c){if(!i.includes("scope"))throw new s.InvalidInstructionError('"'.concat(n,'" expects a scope'));if(!(t.scope instanceof Array))throw new s.InvalidInstructionError('"'.concat(n,'" supplied with invalid scope'));a.push("scope")}if(a.length!==i.length)throw new s.InvalidArgumentError('invalid number of arguments supplied for "'.concat(n,'"'));if(0!==a.filter((function(n){return!i.includes(n)})).length)throw new s.InvalidArgumentError('invalid arguments supplied for "'.concat(n,'"'))}function c(t,a,i){if("object"!==typeof i)return{elementName:"boolean"===typeof i?"value-boolean":"number"===typeof i?"value-number":"value-string",value:i.toString()};if(1!==Object.keys(i).length)throw new s.InvalidArgumentError('invalid argument for parameter "'.concat(a,'" of "').concat(t,'"'));var u=Object(o.a)(Object.entries(i)[0],2),f=u[0],l=u[1];if(a===f)return c(t,a,l);if(!(f in r))throw new s.InvalidInstructionError('"'.concat(f,'" is not a valid argument for "').concat(f,'"'));var b=r[f];if("Data"===b.type){if("string"===typeof l)return{elementName:f,value:l};throw new s.InvalidArgumentError("invalid argument for 'Data' element \"".concat(f,'"'))}if("Expression"===b.type){var d={elementName:"",argMap:null};if(d.elementName=f,"object"!==typeof l||1===Object.keys(l).length){var p=n(f);d.argMap=Object.fromEntries([[p,c(f,p,l)]])}else e(f,l),d.argMap=Object.fromEntries(Object.entries(l).map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return[e,c(f,e,r)]})));return d}throw new s.InvalidArgumentError('"'.concat(f,"\" is not a 'Data' or 'Expression' element"))}function a(t){if("string"===typeof t){if(!(t in r))throw new s.InvalidInstructionError('"'.concat(t,'" is not a valid instruction'));return{elementName:t,argMap:null}}if(1!==Object.keys(t).length)throw new s.InvalidInstructionError("wrong instruction format encountered");var i=Object(o.a)(Object.entries(t)[0],2),u=i[0],f=i[1];if(!(u in r))throw new s.InvalidInstructionError('"'.concat(t,'" is not a valid instruction'));var l={elementName:"",argMap:null};if(l.elementName=u,"object"!==typeof f||1===Object.keys(f).length){var b=n(u);l.argMap=Object.fromEntries([[b,c(u,b,f)]])}else e(u,f),l.argMap=Object.fromEntries(Object.entries(f).filter((function(n){var t=Object(o.a)(n,2),e=t[0];t[1];return"scope"!==e})).map((function(n){var t=Object(o.a)(n,2),e=t[0],r=t[1];return[e,c(u,e,r)]}))),"scope"in f&&(l.scope=f.scope.map((function(n){return a(n)})));return l}var u={process:[],routine:[],crumbs:[t.map((function(n){return a(n)}))]};Object(i.generateFromSnapshot)(u)}return new Promise((function(r){if(!1===function(){try{return(t=Object(a.load)(n))instanceof Array}catch(r){var e=r;return console.log({mark:e.mark,message:e.message,name:e.name,reason:e.reason}),!1}}())r(!1);else{var c=Object(i.generateSnapshot)();try{e(),r(!0)}catch(o){console.log(o),Object(i.generateFromSnapshot)(c),r(!1)}}}))}function b(){Object(i.resetSyntaxTree)()}},27:function(n,t,e){"use strict";e.r(t),e.d(t,"InvalidInstructionError",(function(){return s})),e.d(t,"InvalidArgumentError",(function(){return f}));var r=e(33),c=e(34),o=e(35),a=e(51),i=e(62),u=function(n){Object(o.a)(e,n);var t=Object(a.a)(e);function e(n,c){var o;return Object(r.a)(this,e),(o=t.call(this,c))._name=void 0,o._message=void 0,o._name=n,o._message=c,o}return Object(c.a)(e,[{key:"toString",value:function(){return"".concat(this._name,": ").concat(this._message)}},{key:"type",get:function(){return this._name}}]),e}(Object(i.a)(Error)),s=function(n){Object(o.a)(e,n);var t=Object(a.a)(e);function e(n){return Object(r.a)(this,e),t.call(this,"InvalidInstructionError",n)}return Object(c.a)(e)}(u),f=function(n){Object(o.a)(e,n);var t=Object(a.a)(e);function e(n){return Object(r.a)(this,e),t.call(this,"InvalidArgumentError",n)}return Object(c.a)(e)}(u)},28:function(n,t,e){"use strict";e.r(t),e.d(t,"setup",(function(){return b})),e.d(t,"setButtonImg",(function(){return d}));var r,c,o,a=e(19),i=e(25),u=e(26),s=e.n(u),f=e(41),l=e(21);e(42);function b(n){n.id="editor-toolbar-btn",r=n;var t=function(){var n=Object(i.a)(s.a.mark((function n(t){var e;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(t).then((function(n){return n.text()}));case 2:return e=n.sent,n.abrupt("return",new Promise((function(n){n(e)})));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();Promise.all([t(f.default),t(l.default)]).then((function(n){var t=Object(a.a)(n,2),e=t[0],r=t[1];c=e,o=r,d("code")}))}function d(n){r.innerHTML="code"===n?c:o}},38:function(n,t,e){"use strict";e.r(t),t.default=e.p+"static/media/help.70105245.svg"},39:function(n,t,e){"use strict";e.r(t),t.default=e.p+"static/media/build.8283c240.svg"},40:function(n,t,e){},41:function(n,t,e){"use strict";e.r(t),t.default=e.p+"static/media/code.3211ece1.svg"},42:function(n,t,e){},56:function(n,t,e){"use strict";e.r(t),e.d(t,"setup",(function(){return b})),e.d(t,"getElement",(function(){return d})),e.d(t,"setButtonState",(function(){return p}));var r,c,o=e(25),a=e(26),i=e.n(a),u=e(4),s=e(24),f=e(14),l=e(28);function b(){return new Promise((function(n){Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(n){r=document.createElement("div"),Object(f.setup)(r).then((function(){r.addEventListener("buildprogram",(function(n){Object(s.buildProgram)(n.detail).then((function(n){return Object(f.setStatus)(n?"Successfully Built":"Invalid Code")}))})),n()}))}));case 2:return t.next=4,new Promise((function(n){c=Object(u.a)({location:"toolbar",type:"button",position:"cluster-a"}),Object(l.setup)(c),requestAnimationFrame((function(){return n()}))}));case 4:n();case 5:case"end":return t.stop()}}),t)})))()}))}function d(n){return"button"===n?c:r}function p(n){Object(l.setButtonImg)("clicked"===n?"cross":"code")}e.d(t,"setCode",(function(){return f.setCode})),e.d(t,"setHelp",(function(){return f.setHelp})),e.d(t,"setStatus",(function(){return f.setStatus})),e.d(t,"resetStates",(function(){return f.resetStates}))},67:function(n,t,e){"use strict";e.r(t),e.d(t,"mount",(function(){return f})),e.d(t,"setup",(function(){return l}));var r=e(25),c=e(26),o=e.n(c),a=e(79),i=e(4),u=e(56),s=e(24);function f(){return new Promise((function(n){Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.setup)();case 2:n();case 3:case"end":return t.stop()}}),t)})))()}))}function l(){return new Promise((function(n){var t=Object(a.getComponent)("menu");t&&t.mountHook("reset",(function(){Object(u.setStatus)(""),Object(s.resetProgram)()})),Object(u.setCode)("- clear\n\n# -------------\n# first hexagon\n# -------------\n\n- set-thickness: 4\n- set-color: 5\n- repeat:\n    times:\n      operator-math-plus:\n        operand1: 4\n        operand2: 2\n    scope:\n      - move-forward: 100\n      - turn-right: 60\n\n# --------------\n# second hexagon\n# --------------\n\n- set-color: 9\n- repeat:\n    times: 6\n    scope:\n      - move-forward: 100\n      - turn-left: 60"),Object(u.setCode)('- box-number:\n    name: "a"\n    value: 0\n- box-number:\n    name: "b"\n    value: 1\n- box-number:\n    name: "c"\n    value: 0\n- set-thickness:\n    value:\n      4\n- repeat:\n    times: 10\n    scope:\n      - print:\n          boxidentifier-number: "a"\n      - set-color:\n          boxidentifier-number: "b"\n      - repeat:\n          times: 6\n          scope:\n            - move-forward:\n                operator-math-times:\n                  operand1:\n                    boxidentifier-number: "a"\n                  operand2: 8\n            - turn-left: 90\n      - box-number:\n          name: "c"\n          value:\n            operator-math-plus:\n              operand1:\n                boxidentifier-number: "a"\n              operand2:\n                boxidentifier-number: "b"\n      - box-number:\n          name: "a"\n          value:\n            boxidentifier-number: "b"\n      - box-number:\n          name: "b"\n          value:\n            boxidentifier-number: "c"'),Object(u.setHelp)(Object(s.generateAPI)());var e=Object(u.getElement)("button"),r="initial",c=function n(t){if("initial"===t)Object(i.c)(),Object(u.resetStates)();else{var e=Object(i.b)("Editor",t,{pin:function(){return n("pinned")},unpin:function(){return n("float")}}),c=Object(u.getElement)("editor");e.appendChild(c)}r=t};e.addEventListener("click",(function(){"initial"===r?(Object(u.setButtonState)("clicked"),c("float")):(Object(u.setButtonState)("unclicked"),c("initial"))})),n()}))}}}]);
//# sourceMappingURL=3.bb102c4b.chunk.js.map