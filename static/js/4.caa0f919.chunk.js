(this.webpackJsonpmusicblocks=this.webpackJsonpmusicblocks||[]).push([[4,9,10,12,26,27,31,32,33,34],{14:function(t,n,e){"use strict";e.r(n),e.d(n,"setup",(function(){return g})),e.d(n,"setCode",(function(){return w})),e.d(n,"setStatus",(function(){return E})),e.d(n,"setHelp",(function(){return I})),e.d(n,"resetStates",(function(){return y}));var r,c,a,o,i,u,s,f,l=e(19),d=e(1),b=e(3),p=e.n(b),j=e(38),m=e(39),v=e(21),O=(e(40),e(0));function h(){var t=Object(d.useRef)(null),n=Object(d.useRef)(null),e=Object(d.useRef)(null),b=Object(d.useRef)(null),p=Object(d.useRef)(null),h=Object(d.useRef)(null),g=Object(d.useState)(!1),w=Object(l.a)(g,2),E=w[0],I=w[1];return Object(d.useEffect)((function(){c=t.current,a=n.current,o=e.current,i=b.current,u=p.current,s=h.current,f(),r.addEventListener("resetstates",(function(){I(!1)})),[[j.default,a],[m.default,i],[v.default,u]].forEach((function(t){var n=Object(l.a)(t,2),e=n[0],r=n[1];fetch(e).then((function(t){return t.text()})).then((function(t){return r.innerHTML=t}))}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"editor-wrapper ".concat(E?"editor-wrapper-hidden":""),children:[Object(O.jsx)("textarea",{id:"editor-codebox",ref:t,onInput:function(){return o.innerHTML=""}}),Object(O.jsxs)("div",{id:"editor-console",children:[Object(O.jsx)("button",{id:"editor-btn-help",ref:n,onClick:function(){return I(!0)}}),Object(O.jsx)("div",{id:"editor-status-wrapper",children:Object(O.jsx)("p",{id:"editor-status",ref:e})}),Object(O.jsx)("button",{id:"editor-btn-build",ref:b,onClick:function(){return r.dispatchEvent(new CustomEvent("buildprogram",{detail:c.value}))}})]})]}),Object(O.jsxs)("div",{className:"editor-wrapper ".concat(E?"":"editor-wrapper-hidden"),children:[Object(O.jsx)("textarea",{id:"editor-help",ref:h,readOnly:!0}),Object(O.jsx)("button",{id:"editor-help-close",ref:p,onClick:function(){return I(!1)}})]})]})}function g(t){return new Promise((function(n){(r=t).id="editor",p.a.render(Object(O.jsx)(h,{}),t),f=function(){return requestAnimationFrame((function(){return n()}))}}))}function w(t){c.value=t}function E(t){o.innerHTML=t}function I(t){s.innerHTML=t}function y(){r.dispatchEvent(new Event("resetstates"))}},21:function(t,n,e){"use strict";e.r(n),n.default=e.p+"static/media/close.b6f9ced0.svg"},24:function(t,n,e){"use strict";e.r(n),e.d(n,"generateAPI",(function(){return f})),e.d(n,"buildProgram",(function(){return l})),e.d(n,"resetProgram",(function(){return d}));var r,c=e(22),a=e(19),o=e(76),i=e(52),u=e(32),s=e(27);function f(){r=Object.fromEntries(Object.entries(Object(i.getSpecificationSnapshot)()).map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return[e,Object(c.a)(Object(c.a)({},r),{},{args:null})]}))),Object.entries(r).forEach((function(t){var n=Object(a.a)(t,2),e=n[0],c=(n[1],Object(u.addInstance)(e)),o=Object(u.getInstance)(c).instance;r[e].args=0===o.argLabels.length?null:o.argLabels.map((function(t){return[t,o.getArgType(t)]})),Object(u.removeInstance)(c)}));var t={};Object.entries(r).forEach((function(n){var e=Object(a.a)(n,2),r=e[0],c=e[1],o=c.category;o in t||(t[o]=[]),t[o].push([r,c.type,c.args])}));var n=[];return Object.entries(t).forEach((function(t){var e=Object(a.a)(t,2),r=e[0],c=e[1];n.push('# "'.concat(r,'" elements\n# ------------------------')),c.forEach((function(t){var e=Object(a.a)(t,3),r=e[0],c=e[1],o=e[2];"Data"===c?n.push("- [instruction]:\n    [param]:\n      ".concat(r,": string")):"Expression"===c?null===o||(1===o.length?n.push("- [instruction]:\n    ".concat(r,":\n").concat(o.map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return"      ".concat(e,": ").concat(r.join("|"))})).join("\n"))):n.push("- [instruction]:\n    [param]:\n      ".concat(r,":\n").concat(o.map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return"        ".concat(e,": ").concat(r.join("|"))})).join("\n")))):"Statement"===c?null===o?n.push("- ".concat(r)):1===o.length?n.push("- ".concat(r,": ").concat(o[0][1].join("|"))):n.push("- ".concat(r,":\n").concat(o.map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return"    ".concat(e,": ").concat(r.join("|"))})).join("\n"))):"Block"===c&&(null===o?n.push("- ".concat(r,":\n    scope:\n      - [instruction]\n      - ...")):n.push("- ".concat(r,":\n").concat(o.map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return"    ".concat(e,": ").concat(r.join("|"))})).join("\n"),"\n    scope:\n      - [instruction]\n      - ...")))})),n.push("\n")})),n.join("\n")}function l(t){var n;function e(){function t(t){var n=r[t].args;if(null===n)throw new s.InvalidArgumentError('"'.concat(t,'" does not take arguments'));if(1!==n.length)throw new s.InvalidArgumentError('"'.concat(t,'" takes ').concat(n.length," arguments but only 1 argument supplied"));return n[0][0]}function e(t,n){var e=r[t].args;if(null===e)throw new s.InvalidArgumentError('"'.concat(t,'" does not take arguments'));var c="Block"===r[t].type,o=e.map((function(t){var n=Object(a.a)(t,2),e=n[0];n[1];return e})),i=Object.keys(n);if(c){if(!i.includes("scope"))throw new s.InvalidInstructionError('"'.concat(t,'" expects a scope'));if(!(n.scope instanceof Array))throw new s.InvalidInstructionError('"'.concat(t,'" supplied with invalid scope'));o.push("scope")}if(o.length!==i.length)throw new s.InvalidArgumentError('invalid number of arguments supplied for "'.concat(t,'"'));if(0!==o.filter((function(t){return!i.includes(t)})).length)throw new s.InvalidArgumentError('invalid arguments supplied for "'.concat(t,'"'))}function c(n,o,i){if("object"!==typeof i)return{elementName:"boolean"===typeof i?"value-boolean":"number"===typeof i?"value-number":"value-string",value:i.toString()};if(1!==Object.keys(i).length)throw new s.InvalidArgumentError('invalid argument for parameter "'.concat(o,'" of "').concat(n,'"'));var u=Object(a.a)(Object.entries(i)[0],2),f=u[0],l=u[1];if(o===f)return c(n,o,l);if(!(f in r))throw new s.InvalidInstructionError('"'.concat(f,'" is not a valid argument for "').concat(f,'"'));var d=r[f];if("Data"===d.type){if("string"===typeof l)return{elementName:f,value:l};throw new s.InvalidArgumentError("invalid argument for 'Data' element \"".concat(f,'"'))}if("Expression"===d.type){var b={elementName:"",argMap:null};if(b.elementName=f,"object"!==typeof l||1===Object.keys(l).length){var p=t(f);b.argMap=Object.fromEntries([[p,c(f,p,l)]])}else e(f,l),b.argMap=Object.fromEntries(Object.entries(l).map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return[e,c(f,e,r)]})));return b}throw new s.InvalidArgumentError('"'.concat(f,"\" is not a 'Data' or 'Expression' element"))}function o(n){if("string"===typeof n){if(!(n in r))throw new s.InvalidInstructionError('"'.concat(n,'" is not a valid instruction'));return{elementName:n,argMap:null}}if(1!==Object.keys(n).length)throw new s.InvalidInstructionError("wrong instruction format encountered");var i=Object(a.a)(Object.entries(n)[0],2),u=i[0],f=i[1];if(!(u in r))throw new s.InvalidInstructionError('"'.concat(n,'" is not a valid instruction'));var l={elementName:"",argMap:null};if(l.elementName=u,"object"!==typeof f||1===Object.keys(f).length){var d=t(u);l.argMap=Object.fromEntries([[d,c(u,d,f)]])}else e(u,f),l.argMap=Object.fromEntries(Object.entries(f).filter((function(t){var n=Object(a.a)(t,2),e=n[0];n[1];return"scope"!==e})).map((function(t){var n=Object(a.a)(t,2),e=n[0],r=n[1];return[e,c(u,e,r)]}))),"scope"in f&&(l.scope=f.scope.map((function(t){return o(t)})));return l}var u={process:[],routine:[],crumbs:[n.map((function(t){return o(t)}))]};Object(i.generateFromSnapshot)(u)}return new Promise((function(r){if(!1===function(){try{return(n=Object(o.load)(t))instanceof Array}catch(r){var e=r;return console.log({mark:e.mark,message:e.message,name:e.name,reason:e.reason}),!1}}())r(!1);else{var c=Object(i.generateSnapshot)();try{e(),r(!0)}catch(a){console.log(a),Object(i.generateFromSnapshot)(c),r(!1)}}}))}function d(){Object(i.resetSyntaxTree)()}},27:function(t,n,e){"use strict";e.r(n),e.d(n,"InvalidInstructionError",(function(){return s})),e.d(n,"InvalidArgumentError",(function(){return f}));var r=e(33),c=e(34),a=e(35),o=e(51),i=e(62),u=function(t){Object(a.a)(e,t);var n=Object(o.a)(e);function e(t,c){var a;return Object(r.a)(this,e),(a=n.call(this,c))._name=void 0,a._message=void 0,a._name=t,a._message=c,a}return Object(c.a)(e,[{key:"toString",value:function(){return"".concat(this._name,": ").concat(this._message)}},{key:"type",get:function(){return this._name}}]),e}(Object(i.a)(Error)),s=function(t){Object(a.a)(e,t);var n=Object(o.a)(e);function e(t){return Object(r.a)(this,e),n.call(this,"InvalidInstructionError",t)}return Object(c.a)(e)}(u),f=function(t){Object(a.a)(e,t);var n=Object(o.a)(e);function e(t){return Object(r.a)(this,e),n.call(this,"InvalidArgumentError",t)}return Object(c.a)(e)}(u)},28:function(t,n,e){"use strict";e.r(n),e.d(n,"setup",(function(){return d})),e.d(n,"setButtonImg",(function(){return b}));var r,c,a,o=e(19),i=e(25),u=e(26),s=e.n(u),f=e(41),l=e(21);e(42);function d(t){t.id="editor-toolbar-btn",r=t;var n=function(){var t=Object(i.a)(s.a.mark((function t(n){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n).then((function(t){return t.text()}));case 2:return e=t.sent,t.abrupt("return",new Promise((function(t){t(e)})));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();Promise.all([n(f.default),n(l.default)]).then((function(t){var n=Object(o.a)(t,2),e=n[0],r=n[1];c=e,a=r,b("code")}))}function b(t){r.innerHTML="code"===t?c:a}},38:function(t,n,e){"use strict";e.r(n),n.default=e.p+"static/media/help.70105245.svg"},39:function(t,n,e){"use strict";e.r(n),n.default=e.p+"static/media/build.8283c240.svg"},40:function(t,n,e){},41:function(t,n,e){"use strict";e.r(n),n.default=e.p+"static/media/code.3211ece1.svg"},42:function(t,n,e){},56:function(t,n,e){"use strict";e.r(n),e.d(n,"setup",(function(){return d})),e.d(n,"getElement",(function(){return b})),e.d(n,"setButtonState",(function(){return p}));var r,c,a=e(25),o=e(26),i=e.n(o),u=e(4),s=e(24),f=e(14),l=e(28);function d(){return new Promise((function(t){Object(a.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(t){r=document.createElement("div"),Object(f.setup)(r).then((function(){r.addEventListener("buildprogram",(function(t){Object(s.buildProgram)(t.detail).then((function(t){return Object(f.setStatus)(t?"Successfully Built":"Invalid Code")}))})),t()}))}));case 2:return n.next=4,new Promise((function(t){c=Object(u.a)({location:"toolbar",type:"button",position:"cluster-a"}),Object(l.setup)(c),requestAnimationFrame((function(){return t()}))}));case 4:t();case 5:case"end":return n.stop()}}),n)})))()}))}function b(t){return"button"===t?c:r}function p(t){Object(l.setButtonImg)("clicked"===t?"cross":"code")}e.d(n,"setCode",(function(){return f.setCode})),e.d(n,"setHelp",(function(){return f.setHelp})),e.d(n,"setStatus",(function(){return f.setStatus})),e.d(n,"resetStates",(function(){return f.resetStates}))}}]);
//# sourceMappingURL=4.caa0f919.chunk.js.map